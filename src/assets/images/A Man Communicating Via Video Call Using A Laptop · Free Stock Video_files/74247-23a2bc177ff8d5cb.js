"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74247],{43367:function(n,t,e){e.d(t,{xo:function(){return P},Wo:function(){return x},zK:function(){return D},Sj:function(){return N},sh:function(){return E},BL:function(){return S},P4:function(){return k},Gz:function(){return j},uQ:function(){return Z},Rm:function(){return w}});var r,o=e(94713),i=e(5338),u=e(6939),c=e(30073),a=e.n(c),l=e(91341),s=e(10086),f=e(23810),p=e(75893);e(39010);var v=e(75976);function d(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function g(n,t){var e=t.matcher,r=t.mutator,i=t.options,u=t.revalidate;if(e){if("function"==typeof e)c=function(t){var r=Array.isArray(t)?t:[null];return(0,f.Z)(r,1)[0]===n.tag&&e(t)};else{var c,a,l,s=Array.isArray(e)?e:[e,null!==(a=null===(l=n.pagination)||void 0===l?void 0:l.initial)&&void 0!==a?a:void 0],g=(0,f.Z)(s,2),y=g[0],m=g[1];if(n.tag.startsWith("api-")){var O=(0,v.Qd)(n,y,m);c=function(n){return Array.isArray(n)&&O.every(function(t,e){return n[e]===t})}}else{var b=(0,v.Qd)(n,y,m,0).slice(0,-1);c=function(n){return Array.isArray(n)&&b.every(function(t,e){return n[e]===t})}}}}else c=function(t){var e=Array.isArray(t)?t:[null];return(0,f.Z)(e,1)[0]===n.tag};(0,p.JG)(c,"function"==typeof r?function(n){return n&&r(n)}:function(){return r},function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?d(Object(e),!0).forEach(function(t){(0,o.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}({revalidate:void 0!==u&&u},i)).catch(Sentry.captureException)}var y=e(54184),m=e(69566),O=e(23194);function b(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function h(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?b(Object(e),!0).forEach(function(t){(0,o.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var j=(0,s.xk)(function(n){return"/api/v2/me/collections/medium/".concat(n.id)},(0,s.Nv)()),P=(0,s.H$)(function(n){var t=n.collection,e=n.medium;return["POST","/api/v2/collections/".concat((0,y.j)(t),"/photos").concat(e&&"?photo_id=".concat((0,y.j)(e))),null]},(0,s.Nv)(),{onSuccess:function(n){var t=n.collection,e=n.medium;(0,l.Z)({name:"collection",action:"add",id:(0,y.j)(t)}),g(O.Mk,{}),g(j,{matcher:e,mutator:function(n){return{data:[].concat((0,u.Z)(n.data),[(0,y.j)(t)])}}})}}),w=(0,s.H$)(function(n){return["PATCH","/api/v2/collections/".concat((0,y.j)(n)),n.attributes]},(0,s.Nv)(),{onSuccess:function(n){(0,l.Z)({name:"collection",action:"update",id:(0,y.j)(n)}),g(O.Mk,{})}}),k=(0,s.H$)(function(n){return["DELETE","/api/v2/collections/".concat(n),null]},(0,s.Nv)(),{onSuccess:function(n){(0,l.Z)({name:"collection",action:"delete",id:n}),g(O.Mk,{}),g(j,{mutator:function(t){return{data:t.data.filter(function(t){return t!==n})}}})}}),Z=(0,s.H$)(function(n){var t=n.collection,e=n.medium;return["DELETE","/api/v2/collections/".concat((0,y.j)(t),"/photos").concat(e?"?photo_id=".concat((0,y.j)(e)):"/"),null]},(0,s.Nv)(),{onSuccess:function(n){var t=n.collection,e=n.medium;(0,l.Z)({name:"collection",action:"remove",id:(0,y.j)(t)}),g(O.Mk,{}),g(j,{matcher:e,mutator:function(n){return{data:n.data.filter(function(n){return n!==(0,y.j)(t)})}}})}}),S=(0,s.H$)(function(n){return["POST","/api/v2/collections?title=".concat(n),null]},(0,s.Nv)(),{onSuccess:(r=(0,i.Z)(a().mark(function n(t,e){var r;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=e.data,(0,l.Z)({name:"collection",action:"create",id:r.id});case 2:case"end":return n.stop()}},n)})),function(n,t){return r.apply(this,arguments)})}),x=(0,s.xk)(function(n){return"/api/v2/collections/".concat(n)},(0,s.Nv)()),E=(0,s.EP)()(function(n,t){var e=t.page;return"/api/v2/collections?".concat((0,m.Pz)({per_page:12,page:e}))}),N=(0,s.xk)(function(n){return"/api/v3/collections/".concat(n,"/tags")},(0,s.Nv)());(0,s.xk)(function(){return"/api/v3/collections/popular"},(0,s.Nv)()),(0,s.xk)(function(n){return"/api/v3/search/collection?".concat((0,m.Pz)(n))},(0,s.Nv)()),(0,s.EP)()(function(n,t){var e=t.page;return"/api/v3/collections/suggestions?".concat((0,m.Pz)(h(h({},n),{},{page:e})))});var D=(0,s.EP)()(function(n,t){var e=t.page;return"/api/v3/collections/".concat(n,"/media?page=").concat(e,"&per_page=12")})},41030:function(n,t,e){e.d(t,{h:function(){return f}});var r=e(5338),o=e(23810),i=e(30073),u=e.n(i),c=e(18529),a=e(75893),l=e(75976),s=e(86126);function f(n,t,e,i){var f,p=(0,c.useMemo)(function(){var r=(0,s.o)(n,e,i,t,!1);return{swrOpts:(0,o.Z)(r,1)[0]}},[]),v=(0,c.useState)(function(){var e;return t?null===(e=n.meta)||void 0===e?void 0:e.call(n,t):void 0}),d=v[0],g=v[1],y=(0,c.useMemo)(function(){var t,r=null===(t=n.pagination)||void 0===t?void 0:t.initial;return(null==i?void 0:i.enabled)===!1?null:(0,l.Qd)(n,e,r)},[n,e,null==i?void 0:i.enabled]),m=(0,c.useCallback)((f=(0,r.Z)(u().mark(function t(e){var r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.queryFn(e,"response");case 2:return r=t.sent,n.meta&&r&&g(function(t){var e,o;return null!==(e=null===(o=n.meta)||void 0===o?void 0:o.call(n,r))&&void 0!==e?e:t}),t.abrupt("return",r);case 5:case"end":return t.stop()}},t)})),function(n){return f.apply(this,arguments)}),[n]),O=(0,a.ZP)(y,m,p.swrOpts),b=O.data,h=O.isLoading,j=O.isValidating,P=O.mutate;return(0,c.useMemo)(function(){var n;return{data:b,meta:d,isLoading:h,isFetching:h||j,mutate:P,refetch:(n=(0,r.Z)(u().mark(function n(){return u().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P();case 2:case"end":return n.stop()}},n)})),function(){return n.apply(this,arguments)})}},[b,d,h,j,P])}},17700:function(n,t,e){e.d(t,{Y:function(){return v}});var r=e(5338),o=e(23810),i=e(6939),u=e(30073),c=e.n(u),a=e(18529),l=e(39010),s=e(75976),f=e(86126),p={parallel:!0,revalidateFirstPage:!1,revalidateAll:!1};function v(n,t,e,u){var v,d=(0,a.useRef)(void 0),g=(0,a.useMemo)(function(){var r=(null!==(v=n.pagination)&&void 0!==v?v:{}).initPageState,i=(0,f.o)(n,e,u,t,!0,p),c=(0,o.Z)(i,3),a=c[0],l=c[1],s=c[2];if(r){var v,g,y=null!==(g=null==t?void 0:t.pagination)&&void 0!==g?g:null;d.current=r(y,s)}return{initialUrl:l,swrOpts:a}},[]),y=(0,a.useState)(function(){var e;return t?null===(e=n.meta)||void 0===e?void 0:e.call(n,t):void 0}),m=y[0],O=y[1],b=(0,a.useCallback)(function(t){var r,o,i,u=null!==(r=null===(o=n.pagination)||void 0===o?void 0:o.getPageState(d.current,t))&&void 0!==r?r:null===(i=n.pagination)||void 0===i?void 0:i.initial;return(0,s.Qd)(n,e,u,t)},[n,e]),h=(0,a.useCallback)((v=(0,r.Z)(c().mark(function t(e){var r,i,u,a,l;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,o.Z)(e,5)[4],t.next=3,n.queryFn(e,"response");case 3:return u=t.sent,a=(0,f.y)(n.select,u),u&&null!==(r=n.pagination)&&void 0!==r&&r.updateState&&void 0!==(l=n.pagination.updateState(u.pagination,d.current,i))&&(d.current=l),n.meta&&u&&O(function(t){var e,r;return null!==(e=null===(r=n.meta)||void 0===r?void 0:r.call(n,u))&&void 0!==e?e:t}),t.abrupt("return",a);case 8:case"end":return t.stop()}},t)})),function(n){return v.apply(this,arguments)}),[n]),j=(0,l.ZP)(b,h,g.swrOpts),P=j.data,w=j.isLoading,k=j.isValidating,Z=j.size,S=j.mutate,x=j.setSize,E=(0,a.useMemo)(function(){var n;return null!==(n=null==P?void 0:P.reduce(function(n,t){return n.push.apply(n,(0,i.Z)(t)),n},[]))&&void 0!==n?n:[]},[P]);return(0,a.useMemo)(function(){var t,e,o,i;return{data:E,meta:m,isLoading:w,isFetching:w||k,queryKey:g.initialUrl,hasNextPage:null!==(t=null===(e=n.pagination)||void 0===e?void 0:e.hasNextPage(d.current,Z))&&void 0!==t&&t,getResultCount:function(){var t,e;return null!==(t=null===(e=n.pagination)||void 0===e?void 0:e.getResultCount(d.current))&&void 0!==t?t:null},refetch:(o=(0,r.Z)(c().mark(function n(){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S();case 2:return n.abrupt("return",null);case 3:case"end":return n.stop()}},n)})),function(){return o.apply(this,arguments)}),fetchNextPage:(i=(0,r.Z)(c().mark(function n(){var t;return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return x(t=Z+1),n.abrupt("return",t);case 3:case"end":return n.stop()}},n)})),function(){return i.apply(this,arguments)})}},[E,m,w,k,g,n.pagination,S,Z,x])}},86126:function(n,t,e){e.d(t,{o:function(){return f},y:function(){return s}});var r=e(94713),o=e(23810),i=e(74162),u=e(39010),c=e(75976);function a(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,r)}return e}function l(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach(function(t){(0,r.Z)(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function s(n,t){return n&&t?n(t):t}function f(n,t,e,r,a,s){var f,p,v,d,g=r&&a?[null!==(f=null===(p=n.select)||void 0===p?void 0:p.call(n,r))&&void 0!==f?f:r]:r,y=(0,c.Qd)(n,t,null!==(v=null===(d=n.pagination)||void 0===d?void 0:d.initial)&&void 0!==v?v:void 0),m=(0,o.Z)(y,3)[2],O={};g&&(O[(0,i.qC)(y)[0]]=g,a&&(O[(0,u.wE)(function(){return y})]=g));var b=null!=e&&!!e.responsive||!r;return[l(l({},s),{},{fallback:O,revalidateOnMount:b},null==e?void 0:e.swr),m,y]}},75976:function(n,t,e){e.d(t,{Qd:function(){return o},vt:function(){return i}});var r=e(6939);function o(n,t,e,r){var o=n.keyFn(t,e);return[n.tag,"GET",o,null,null!=r?r:0]}function i(n,t){var e=n.keyFn(t);return[n.tag].concat((0,r.Z)(e),[-1])}}}]);